import{r as b,E as p,H as k,J as u,j as s,L as i,K as x}from"./app-Do2TdiUf.js";import{G as l}from"./index-CSFTDlUB.js";const O=({product:e})=>{var m,d,f,c;const[j,C]=b.useState(1),[y,o]=b.useState(!1),[g,{isLoading:r}]=p(),{refetch:v}=k(),{data:t}=u();localStorage.getItem("authToken");const n=!e.qty||e.qty<=0,w=((m=e==null?void 0:e.colors)==null?void 0:m.length)>0||((d=e==null?void 0:e.sizes)==null?void 0:d.length)>0,N=async()=>{var h;if(n){x.error("This product is out of stock!");return}try{const a={product_id:e.id,qty:j};await g(a).unwrap(),v(),x.success("Product added to cart!")}catch(a){x.error(((h=a==null?void 0:a.data)==null?void 0:h.message)||"Failed to add to cart")}};return s.jsxs("div",{className:"w-full  mx-auto transition-all duration-500 overflow-hidden hover:-translate-y-1 relative",children:[n&&s.jsx("div",{className:"absolute top-3 left-3 z-10 bg-red text-cream text-xs font-mont font-semibold px-3 py-1 rounded-full shadow-lg",children:"Out of Stock"}),s.jsxs("div",{className:`relative overflow-hidden rounded-xl ${n?"opacity-70":""}`,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[s.jsx("img",{src:`/${e.thumb_image}`,alt:e.title,loading:"lazy",className:"w-full object-cover transition-transform duration-500 hover:scale-105 h-full rounded-xl"}),y&&s.jsx("div",{className:"absolute inset-0 bg-dark2/70 flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col space-y-3",children:[n?s.jsxs("button",{disabled:!0,className:"w-full flex font-mont justify-between items-center text-[12px] md:text-[18px] border border-red bg-red/80 text-cream rounded-[10px] mb-4 px-4 py-2 md:px-[30px] md:py-[15px] cursor-not-allowed opacity-80",children:["Out of Stock",s.jsx("span",{children:s.jsx(l,{})})]}):w?s.jsxs(i,{to:`/product-details/${e==null?void 0:e.slug}`,className:"w-full flex justify-between font-mont items-center text-[12px] md:text-[14px] bg-red border border-transparent hover:border-cream rounded-[10px] text-cream mb-4 px-4 py-2 md:px-2.5 md:py-[7px]",children:["Select Option",s.jsx("span",{children:s.jsx(l,{})})]}):s.jsxs("button",{onClick:N,disabled:r,className:`w-full flex justify-between items-center text-[10px] md:text-[14px] border border-transparent hover:border-cream rounded-[10px] text-cream mb-4 px-4 py-2 md:px-5 md:py-2.5 cursor-pointer ${r?"bg-gray-500":"bg-red"}`,children:[r?"Adding...":"Add to cart",s.jsx("span",{children:s.jsx(l,{})})]}),s.jsxs(i,{to:`/product-details/${e==null?void 0:e.slug}`,className:"w-full flex justify-between font-mont items-center text-[12px] md:text-[14px] bg-dark2 border border-transparent hover:border-cream rounded-[10px] text-cream mb-4 px-4 py-2 md:px-5 md:py-2.5",children:["Details",s.jsx("span",{children:s.jsx(l,{})})]})]})})]}),s.jsxs("div",{className:"px-2 mt-2",children:[s.jsx("h4",{className:"text-cream text-[12px] xl:text-[14px] font-normal md:font-semibold font-mont mb-2.5",children:s.jsx(i,{to:`/product-details/${e==null?void 0:e.slug}`,className:"font-mont truncate",children:e==null?void 0:e.name})}),s.jsxs("div",{className:"",children:[s.jsxs("p",{className:"text-[12px] xl:text-[17px] text-cream font-mont",children:[(f=t==null?void 0:t.settings)==null?void 0:f.currency_icon,e!=null&&e.offer_price?e==null?void 0:e.offer_price:e==null?void 0:e.price]}),(e==null?void 0:e.offer_price)&&s.jsxs("p",{className:"text-red line-through decoration-cream text-[12px] xl:text-[14px] font-mont font-medium",children:[(c=t==null?void 0:t.settings)==null?void 0:c.currency_icon,e==null?void 0:e.price]})]})]})]})};export{O as P};
