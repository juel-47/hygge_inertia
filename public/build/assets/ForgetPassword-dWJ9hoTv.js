import{k as E,r as s,j as e,L as p,aa as R,af as C,K as P}from"./app-Do2TdiUf.js";import{u as B}from"./index.esm-BxOkTjIM.js";import{b as F}from"./url-hAJoT1RU.js";const M=()=>{E();const[t,m]=s.useState(!1),[i,g]=s.useState(!1),[o,w]=s.useState(""),[r,c]=s.useState(!1),[a,d]=s.useState(30),j=`${F}/api/v1/forgot-password`,{register:v,handleSubmit:N,formState:{errors:l},setError:y,clearErrors:b,reset:k}=B({defaultValues:{email:""}});s.useEffect(()=>{if(i&&a>0){const n=setTimeout(()=>d(a-1),1e3);return()=>clearTimeout(n)}else a===0&&c(!0)},[i,a]);const x=async n=>{var u,f;m(!0),b();try{await C.post(j,{email:n.email}),w(n.email),g(!0),c(!1),d(30),k(),P.success("Password reset link sent to your email!")}catch(h){const L=((f=(u=h.response)==null?void 0:u.data)==null?void 0:f.message)||h.message||"Failed to send reset link. Please try again.";y("general",{type:"manual",message:L})}finally{m(!1)}},S=()=>{r&&o&&x({email:o})};return e.jsx("div",{className:"flex min-h-screen w-full bg-dark1",children:e.jsxs("div",{className:"w-full flex flex-col items-center justify-center px-4",children:[i?e.jsxs("div",{className:"md:w-96 w-full max-w-md flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"mx-auto",children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-green-500",children:[e.jsx("circle",{cx:"32",cy:"32",r:"28",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{d:"M20 32L28 40L44 24",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl text-cream font-medium mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-sm text-gray max-w-xs mx-auto",children:["We’ve sent a password reset link to",e.jsxs("span",{className:"text-cream font-medium",children:[" ",o]})]}),e.jsxs("p",{className:"text-xs text-gray mt-2",children:["Please check your"," ",e.jsx("span",{className:"text-cream",children:"inbox"})," and"," ",e.jsx("span",{className:"text-cream",children:"spam/junk"})," ","folder."]})]}),e.jsx("button",{onClick:S,disabled:!r||t,className:`text-sm font-medium transition-all ${r?"text-indigo-400 hover:underline cursor-pointer":"text-gray opacity-60 cursor-not-allowed"}`,children:r?"Resend Email":`Resend in ${a}s`}),e.jsxs("p",{className:"text-xs text-gray",children:["Still no email?"," ",e.jsx("a",{href:"mailto:support@yourapp.com",className:"text-indigo-400 hover:underline",children:"Contact support"})]}),e.jsx("p",{className:"text-sm text-gray mt-4",children:e.jsx(p,{to:"/signin",className:"text-indigo-400 hover:underline font-medium",children:"Back to Sign In"})})]}):e.jsxs("form",{onSubmit:N(x),className:"md:w-96 w-full max-w-md flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-4xl text-cream font-medium",children:"Forgot Password"}),e.jsx("p",{className:"text-sm text-gray mt-3 text-center max-w-xs",children:"Enter your email and we’ll send you a link to reset your password."}),l.general&&e.jsx("p",{className:"text-red-500 text-sm mt-4 w-full text-center bg-red-50 p-2 rounded-md",children:l.general.message}),e.jsxs("div",{className:"flex items-center gap-4 w-full my-5",children:[e.jsx("div",{className:"w-full h-px bg-cream"}),e.jsx("p",{className:"text-nowrap text-sm text-cream",children:"reset via email"}),e.jsx("div",{className:"w-full h-px bg-cream"})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex items-center w-full bg-transparent border border-cream h-12 rounded-full overflow-hidden pl-6 gap-2",children:[e.jsx("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 .55.571 0H15.43l.57.55v9.9l-.571.55H.57L0 10.45zm1.143 1.138V9.9h13.714V1.69l-6.503 4.8h-.697zM13.749 1.1H2.25L8 5.356z",fill:"#fffbed"})}),e.jsx("input",{type:"email",...v("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}}),placeholder:"Email id",className:"bg-transparent text-cream placeholder-cream outline-none text-sm w-full h-full",disabled:t})]}),l.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1 pl-2",children:l.email.message})]}),e.jsx("button",{type:"submit",disabled:t,className:`mt-8 w-full h-11 rounded-full text-white font-medium bg-red hover:bg-red/90 transition-all duration-200 ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:t?"Sending...":"Send Reset Link"}),e.jsxs("p",{className:"text-gray text-sm mt-6 text-center",children:["Remember your password?"," ",e.jsx(p,{className:"text-indigo-400 hover:underline font-medium",to:"/signin",children:"Back to Sign in"})]})]}),e.jsx(R,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})})};export{M as default};
