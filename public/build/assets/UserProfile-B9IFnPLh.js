import{r as a,ag as _,ah as S,j as e,ai as C,aj as R}from"./app-Do2TdiUf.js";function O({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const $=a.forwardRef(O);function A({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const M=a.forwardRef(A);function F({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const U=a.forwardRef(F);function q({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Z=a.forwardRef(q);function B({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const I=a.forwardRef(B);function T({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const W=a.forwardRef(T);function H({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const E=a.forwardRef(H);function V({title:s,titleId:t,...l},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),s?a.createElement("title",{id:t},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const P=a.forwardRef(V),K=()=>{var f,c,g;const[s,t]=a.useState("profile"),[l,n]=a.useState(!1),o=localStorage.getItem("authToken"),{data:r,isLoading:i,error:m}=_(void 0,{skip:!o}),{data:d,isLoading:p,error:x}=S(),b=[{id:"profile",name:"Profile",icon:P},{id:"orders",name:"Orders",icon:E},{id:"change-password",name:"Change Password",icon:U}];return e.jsx("div",{className:"min-h-screen bg-dark1 py-8 ",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4 xl:px-20",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-cream",children:"My Account"}),e.jsx("p",{className:"text-gray mt-2",children:"Manage your profile and preferences"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row bg-dark2 rounded-lg shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"md:w-1/4 bg-gray/70 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("img",{className:"w-16 h-16 rounded-full object-cover",src:((f=r==null?void 0:r.data)==null?void 0:f.image)&&`${r.data.image}`,alt:"Profile"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:((c=r==null?void 0:r.data)==null?void 0:c.name)||"Sirajul Islam"}),e.jsx("p",{className:"text-sm text-dark2",children:(g=r==null?void 0:r.data)==null?void 0:g.email})]})]}),e.jsxs("nav",{className:"space-y-2",children:[b.map(j=>e.jsxs("button",{onClick:()=>t(j.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${s===j.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(j.icon,{className:"w-5 h-5 mr-3"}),j.name]},j.id)),e.jsxs("button",{onClick:()=>{localStorage.removeItem("authToken"),window.location.href="/"},className:"w-full flex items-center px-4 py-3 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[e.jsx($,{className:"w-5 h-5 mr-3"}),"Sign Out"]})]})]}),e.jsxs("div",{className:"md:w-3/4 p-6",children:[s==="profile"&&e.jsx(z,{userData:r==null?void 0:r.data,isEditing:l,setIsEditing:n,isLoading:i,error:m}),s==="orders"&&e.jsx(Q,{orders:(d==null?void 0:d.orders)||[],isLoading:p,error:x}),s==="change-password"&&e.jsx(G,{})]})]})]})})},z=({userData:s,isEditing:t,setIsEditing:l,isLoading:n,error:o})=>{const[r,i]=a.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",username:(s==null?void 0:s.username)||"",address:(s==null?void 0:s.address)||"",image:(s==null?void 0:s.image)||""}),[m,d]=a.useState(null),[p,x]=a.useState(null),[b,f]=a.useState(null),[c,{isLoading:g}]=C(),j=async w=>{var N,y;if(w.preventDefault(),x(null),f(null),!r.name.trim()){x("Name is required");return}if(!r.email.trim()){x("Email is required");return}if(!/\S+@\S+\.\S+/.test(r.email)){x("Please enter a valid email address");return}const h=new FormData;h.append("name",r.name),h.append("email",r.email),h.append("phone",r.phone),h.append("username",r.username),h.append("address",r.address),m&&h.append("image",m);try{await c(h).unwrap(),f("Profile updated successfully!"),l(!1)}catch(u){let k="Failed to update profile";(N=u==null?void 0:u.data)!=null&&N.message?k=u.data.message:(y=u==null?void 0:u.data)!=null&&y.errors?k=Object.values(u.data.errors).flat().join(", "):(u==null?void 0:u.status)===401&&(k="Unauthorized: Invalid or missing token"),x(k)}},v=w=>{i({...r,[w.target.name]:w.target.value})},L=w=>{const h=w.target.files[0];if(h){d(h);const N=new FileReader;N.onload=y=>{i({...r,image:y.target.result})},N.readAsDataURL(h)}};return n?e.jsx("div",{className:"text-cream",children:"Loading profile..."}):o?e.jsxs("div",{className:"text-red-600",children:["Error loading profile: ",o.message]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-cream",children:"Personal Information"}),!t&&e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-red text-white rounded-md hover:bg-red/70 transition-colors",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Edit Profile"]})]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:p}),b&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md",children:b}),t?e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("img",{className:"w-20 h-20 rounded-full object-cover",src:r.image,alt:"Profile"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray",children:"Change photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"mt-1 text-sm text-gray-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:v,className:"mt-1 block w-full rounded-md border text-cream border-gray shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:v,className:"mt-1 block w-full rounded-md border text-cream border-gray shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:v,className:"mt-1 block w-full rounded-md border border-gray text-cream shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:r.username,onChange:v,className:"mt-1 block w-full border rounded-md border-gray text-cream shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray",children:"Address"}),e.jsx("textarea",{name:"address",value:r.address,onChange:v,rows:3,className:"mt-1 block w-full border rounded-md border-gray text-cream shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:g,className:`bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors ${g?"opacity-50 cursor-not-allowed":""}`,children:g?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>l(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{className:"w-20 h-20 rounded-full object-cover",src:(s==null?void 0:s.image)&&`${s.image}`,alt:"Profile"}),e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-semibold text-cream",children:s==null?void 0:s.name})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-6 h-6 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-dark2",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(W,{className:"w-6 h-6 text-cream mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:(s==null?void 0:s.phone)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx(P,{className:"w-6 h-6 text-gray-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Username"}),e.jsx("p",{className:"font-medium text-gray-900",children:(s==null?void 0:s.username)||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start p-4 bg-gray-50 rounded-lg sm:col-span-2",children:[e.jsx(Z,{className:"w-6 h-6 text-gray-500 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),e.jsx("p",{className:"font-medium text-gray-900",children:(s==null?void 0:s.address)||"N/A"})]})]})]})]})]})},Q=({orders:s,isLoading:t,error:l})=>{const n=(o,r={})=>{if(!o)return r;try{return JSON.parse(o)}catch{return r}};return t?e.jsx("div",{className:"text-cream",children:"Loading orders..."}):l?e.jsxs("div",{className:"text-red-600",children:["Error loading orders: ",l.message]}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-cream mb-6",children:"Order History"}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-cream",children:"No orders found."}),e.jsx("button",{className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Start Shopping"})]}):e.jsx("div",{className:"space-y-4",children:s.map(o=>{const r=n(o.order_address||"{}"),i=n(o.shipping_method||"{}"),m=!r.address||Object.keys(r).length===0;return e.jsxs("div",{className:"border border-gray/70 rounded-lg p-5 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg text-cream",children:["Order #",o.invoice_id]}),e.jsxs("p",{className:"text-sm text-gray",children:["Placed on"," ",new Date(o.created_at||Date.now()).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-cream",children:[o.product_qty," item",o.product_qty>1?"s":""]}),e.jsxs("p",{className:"text-sm text-cream",children:["Shipping:"," ",e.jsx("strong",{children:m?"Store Pickup (Free)":i.name||"Standard Delivery"})]}),e.jsxs("p",{className:"text-sm text-cream",children:[m?"Pickup Store:":"Deliver to:"," ",m?e.jsxs("span",{className:"text-green-400 font-medium",children:[i.store_name||i.name||"Pickup Point",e.jsx("br",{}),e.jsxs("span",{className:"text-xs text-gray-200",children:[e.jsx("strong",{className:"text-cream font-bold ml-1",children:"Address:"}),i.address]}),e.jsxs("span",{className:"text-xs text-gray-200",children:[e.jsx("strong",{className:"text-cream font-bold ml-1",children:"Location:"}),i.map_location]}),e.jsxs("span",{className:"text-xs text-gray-200 ",children:[e.jsx("strong",{className:"text-cream font-bold ml-1",children:"Phone:"}),i.phone]}),e.jsxs("span",{className:"text-xs text-gray-200 ",children:[e.jsx("strong",{className:"text-cream font-bold ml-1",children:"Email:"}),i.email]})]}):e.jsxs("span",{children:[r.address,r.city&&`, ${r.city}`,r.state&&`, ${r.state}`,r.zip&&` - ${r.zip}`]})]})]})}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-cream mb-2",children:"Products"}),o.order_products.map(d=>{const p=n(d.variants||"{}");return e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("img",{src:d.front_image?`/${d.front_image}`:d.back_image?`/${d.back_image}`:p.image?`/${p.image}`:"https://via.placeholder.com/100",alt:d.product_name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-cream font-medium",children:d.product_name}),e.jsxs("p",{className:"text-sm text-gray",children:["Quantity: ",d.qty]}),e.jsxs("p",{className:"text-sm text-gray",children:["Unit Price: $",d.unit_price]})]})]},d.id)})]}),e.jsx("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100",children:e.jsxs("span",{className:"text-cream font-semibold",children:["Total: $",o.amount]})})]},o.id)})})]})},G=()=>{const[s,t]=a.useState({current_password:"",new_password:"",new_password_confirmation:""}),[l,n]=a.useState(null),[o,r]=a.useState(null),[i,{isLoading:m}]=R(),d=x=>{t({...s,[x.target.name]:x.target.value}),n(null),r(null)},p=async x=>{var b,f;if(x.preventDefault(),n(null),r(null),!s.current_password){n("Current password is required");return}if(s.new_password.length<6){n("New password must be at least 6 characters");return}if(s.new_password!==s.new_password_confirmation){n("New password and confirmation do not match");return}try{await i(s).unwrap(),r("Password changed successfully!"),t({current_password:"",new_password:"",new_password_confirmation:""})}catch(c){let g="Failed to change password";(b=c==null?void 0:c.data)!=null&&b.message?g=c.data.message:(f=c==null?void 0:c.data)!=null&&f.errors&&(g=Object.values(c.data.errors).flat().join(", ")),n(g)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-cream mb-6",children:"Change Password"}),l&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:l}),o&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md",children:o}),e.jsxs("form",{onSubmit:p,className:"space-y-6 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream",children:"Current Password"}),e.jsx("input",{type:"password",name:"current_password",value:s.current_password,onChange:d,className:"mt-1 block w-full rounded-md border border-gray text-cream bg-dark2 p-2 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream",children:"New Password"}),e.jsx("input",{type:"password",name:"new_password",value:s.new_password,onChange:d,className:"mt-1 block w-full rounded-md border border-gray text-cream bg-dark2 p-2 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cream",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"new_password_confirmation",value:s.new_password_confirmation,onChange:d,className:"mt-1 block w-full rounded-md border border-gray text-cream bg-dark2 p-2 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Changing...":"Change Password"})]})]})};export{K as default};
